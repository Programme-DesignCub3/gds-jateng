import{v as I,p as P,a as D,b as R,s as O}from"./filepond-plugin-file-validate-size.esm-BdWSUhgI.js";import{_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-BW-Uk1ZR.js";import{o as p,c as _,a as oe,d as z,Q as C,k as T,T as B,x as ne,y as ae,b as i,i as L,f as l,w as t,g as n,u as e,t as y,l as re,D as de,I as M,j as q,n as N,F as H,h as U,Z as ue}from"./app-QodTeFZz.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as u,a as j}from"./index-BW379UGd.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-BoOU5wAp.js";import{_ as E}from"./Textarea.vue_vue_type_script_setup_true_lang-CE3hzSFb.js";import{_ as m}from"./InputError.vue_vue_type_script_setup_true_lang-uCApBTW2.js";import{_ as K,a as W,b as G,c as J,d as Q,e as Z,f as X,g as Y}from"./AlertDialogCancel.vue_vue_type_script_setup_true_lang-V-wHzVoY.js";import{_ as ee}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-CZt0YvrE.js";import{g as se}from"./utils-BuzIblbe.js";import"./index-BX9TLIVG.js";import"./createLucideIcon-BIY99D_V.js";import"./ApplicationLogo-aprdaqZi.js";const ce={},pe={class:"relative -z-10 flex h-80 items-center justify-center overflow-x-clip bg-[length:15%] md:-mb-32 md:h-[30rem] md:bg-[length:15%] lg:h-[35rem] lg:bg-[length:5%] xl:h-[45rem] xl:bg-[length:8%]"},fe=oe('<div class="absolute -top-14 left-1/2 size-full -translate-x-1/2 bg-announcement-illust-etc bg-[length:100%_100%] bg-center bg-repeat-x md:-top-28 lg:-top-20 xl:size-[90%]"></div><div class="xs:size-50 absolute -right-16 bottom-1 size-44 bg-boy bg-[length:100%_100%] bg-center bg-no-repeat xs:size-52 sm:size-64 md:-bottom-4 md:-right-24 md:size-72 lg:-bottom-28 lg:-right-44 lg:size-80 xl:size-[36rem]"></div><div class="xs:size-50 absolute -left-16 bottom-5 size-44 bg-girl bg-[length:100%_100%] bg-center bg-no-repeat xs:size-52 sm:size-64 md:-left-24 md:bottom-12 md:size-72 lg:-left-56 lg:bottom-0 lg:size-40 xl:size-[36rem]"></div><div class="relative flex h-full min-w-fit flex-col items-center justify-center bg-orange-paper-rip bg-[length:100%_100%] bg-center bg-no-repeat py-2"><p class="inline-block w-1/2 text-center text-xl font-bold uppercase tracking-widest text-white sm:text-xl md:text-3xl xl:text-5xl"> UPLOAD SUBMISSION </p></div>',4),ge=[fe];function _e(k,g){return p(),_("div",pe,ge)}const be=me(ce,[["render",_e]]),he={class:"container mb-10 max-w-xl"},ve={class:"gap-3"},xe={class:""},we={class:"relative flex w-full max-w-[100vw] flex-col items-center justify-center rounded-md bg-muted/50 p-2 ring-2 ring-primary lg:col-span-2 lg:p-4"},ye={class:"relative aspect-video w-full rounded-lg"},$e={class:"gap-3"},ke=i("p",{class:"mt-1 text-xs text-muted-foreground dark:text-red-400"}," Video We Are Ready for Schoolicious ",-1),Se={class:"gap-3"},Ve={class:"gap-3"},Ae={class:"grid gap-3"},Ue={key:0,class:"space-y-2"},je={class:"h-3 overflow-hidden rounded bg-gray-100 shadow-inner"},ze={class:"flex items-center justify-between"},Fe=i("div",{class:"flex items-center space-x-2"},null,-1),Ie={class:"text-sm"},Pe=z({__name:"UploadVideo",setup(k){const g=C(),b=T(()=>g.props.auth.user),s=B({file:null,thumbnail:null,judulSubmission:"",linkIg:"",competition:b.value.competition,submissionDescription:""}),c=ne(null),h=I(R,D,P),S=(o,d)=>{if(o){console.error("Oh no, something went wrong!",o);return}s.file=d.file},V=(o,d)=>{s.file=null},A=(o,d)=>{if(o){console.error("Oh no, something went wrong!",o);return}s.thumbnail=d.file},v=(o,d)=>{s.thumbnail=null},x=()=>{O({credits:!1,allowMultiple:!1,instantUpload:!1,allowProcess:!1})},r=o=>{let d=new FileReader;if(o&&c){d.readAsArrayBuffer(o),d.onload=function(f){var F;let w=(F=f.target)==null?void 0:F.result;if(w&&w instanceof ArrayBuffer){let le=new Blob([new Uint8Array(w)],{type:"video/mp4"}),ie=window.URL.createObjectURL(le);c.value?c.value.src=ie:console.error("videoPlayer is null when trying to set src")}else console.error("Unexpected buffer type:",w)};return}c&&(c.value?c.value.src="":console.error("videoPlayer is null when trying to set src"))};ae(()=>s.file,o=>{r(o)});const a=()=>{s.post("/submission",{onError:o=>{console.log("error nih bos : "+o)}})};return(o,d)=>(p(),_(H,null,[i("div",he,[i("form",{onSubmit:L(a,["prevent"]),class:"grid w-full items-start gap-6 overflow-auto p-2 lg:p-4"},[i("div",ve,[l(e(u),{for:"competition"},{default:t(()=>[n("Competition : ")]),_:1}),l(e(j),null,{default:t(()=>[n(y(e(se)(e(s).competition)),1)]),_:1}),l(m,{class:"mt-2",message:e(s).errors.competition},null,8,["message"])]),i("div",xe,[l(e(u),null,{default:t(()=>[n("Upload File")]),_:1}),l(e(h),{name:"test",ref:"pond","label-idle":"Drop files here...","instant-upload":!1,"allow-multiple":!1,credits:"false","accepted-file-types":["video/mp4","video/x-matroska","video/quicktime"],"max-file-size":"250MB",disabled:e(s).processing,onAddfile:S,onInit:x,onRemovefile:V},null,8,["disabled"]),l(m,{class:"mt-2",message:e(s).errors.file},null,8,["message"]),re(i("div",null,[i("div",we,[i("div",ye,[l(e(j),{variant:"outline",class:"absolute right-1 top-2 z-1 bg-muted text-xs opacity-50 md:right-4 md:top-4"},{default:t(()=>[n(" Video Preview ")]),_:1}),i("video",{draggable:"false",ref_key:"videoPlayer",ref:c,id:"video-preview",class:"aspect-video w-full rounded-lg",controls:""},null,512)])])],512),[[de,e(s).file]])]),i("div",$e,[i("div",null,[l(e(u),{for:"instagram_reels"},{default:t(()=>[n("link URL Instagram Reels :")]),_:1}),ke]),l(e($),{modelValue:e(s).linkIg,"onUpdate:modelValue":d[0]||(d[0]=f=>e(s).linkIg=f),required:"",id:"instagram_reels",placeholder:"ex: https://www.instagram.com/reel/C68td6fyyzsM/?hl=en",disabled:e(s).processing},null,8,["modelValue","disabled"]),l(m,{class:"mt-2",message:e(s).errors.linkIg},null,8,["message"])]),i("div",Se,[l(e(u),{for:"judul"},{default:t(()=>[n("Judul")]),_:1}),l(e($),{id:"judul",required:"",modelValue:e(s).judulSubmission,"onUpdate:modelValue":d[1]||(d[1]=f=>e(s).judulSubmission=f),placeholder:"ex: GDSCHOOLICIOUS_NAMA SEKOLAH_KOTA ASAL",disabled:e(s).processing},null,8,["modelValue","disabled"]),l(m,{class:"mt-2",message:e(s).errors.judulSubmission},null,8,["message"])]),i("div",Ve,[l(e(u),{for:"role"},{default:t(()=>[n("Upload Thumbnail video")]),_:1}),l(e(h),{name:"test","max-file-size":"3MB","accepted-file-types":"image/jpeg, image/png, image/jpg","label-idle":"Drop files here...","instant-upload":!1,"allow-multiple":!1,credits:"false",required:"",disabled:e(s).processing,onAddfile:A,onInit:x,onRemovefile:v},null,8,["disabled"]),l(m,{class:"mt-2",message:e(s).errors.thumbnail},null,8,["message"])]),i("div",Ae,[l(e(u),{for:"description"},{default:t(()=>[n("Description")]),_:1}),l(e(E),{id:"description",required:"",modelValue:e(s).submissionDescription,"onUpdate:modelValue":d[2]||(d[2]=f=>e(s).submissionDescription=f),placeholder:"ex: Temukan Harmoni indah dalam lagu 'Rasa di Ujung Senda' dengan lirik penuh makna dan melodi yang menenagkan",class:"min-h-[9.5rem]",disabled:e(s).processing},null,8,["modelValue","disabled"]),l(m,{class:"mt-2",message:e(s).errors.submissionDescription},null,8,["message"])]),e(s).progress?(p(),_("div",Ue,[i("div",je,[i("div",{class:"h-full bg-primary transition-all duration-200",style:M({width:e(s).progress.percentage+"%"})},null,4)]),i("div",ze,[Fe,i("div",Ie,y(e(s).progress.percentage)+"%",1)])])):q("",!0),l(ee,{class:N([{"opacity-25":e(s).processing},"ml-auto w-fit"]),disabled:e(s).processing,type:"submit"},{default:t(()=>[n("Submit")]),_:1},8,["class","disabled"])],32)]),l(e(Y),null,{default:t(()=>[l(e(K),null,{default:t(()=>[l(e(W),null,{default:t(()=>[l(e(G),null,{default:t(()=>[n("Are you absolutely sure?")]),_:1}),l(e(J),null,{default:t(()=>[n(" This action cannot be undone. This will permanently send the submission ")]),_:1})]),_:1}),l(e(Q),null,{default:t(()=>[l(e(Z),null,{default:t(()=>[n("Cancel")]),_:1}),l(e(X),null,{default:t(()=>[n("Continue")]),_:1})]),_:1})]),_:1})]),_:1})],64))}}),De={class:"container mb-10 max-w-xl"},Re=i("h1",null,"Upload images",-1),Oe={class:"gap-3"},Ce={class:""},Te={class:"gap-3"},Be={class:"gap-3"},Le=i("p",{class:"mt-1 text-xs text-muted-foreground dark:text-red-400"}," Video We Are Ready for Schoolicious ",-1),Me={class:"gap-3"},qe={class:"grid gap-3"},Ne={key:0,class:"space-y-2"},He={class:"h-3 overflow-hidden rounded bg-gray-100 shadow-inner"},Ee={class:"flex items-center justify-between"},Ke=i("div",{class:"flex items-center space-x-2"},null,-1),We={class:"text-sm"},Ge=z({__name:"UploadImages",setup(k){const g=C(),b=T(()=>g.props.auth.user),s=B({files:[],thumbnail:null,judulSubmission:"",linkIg:"",competition:b.value.competition,submissionDescription:""}),c=I(R,D,P),h=(r,a)=>{if(r){console.error("Oh no, something went wrong!",r);return}s.files.push(a)},S=(r,a)=>{console.log("remove id : "+a.id),s.files=s.files.filter(o=>o.id!==a.id)},V=(r,a)=>{if(r){console.error("Oh no, something went wrong!",r);return}s.thumbnail=a.file},A=(r,a)=>{s.thumbnail=null},v=()=>{O({credits:!1,instantUpload:!1,allowProcess:!1})},x=()=>{s.transform(r=>({...r,files:r.files.map(a=>a.file)})).post("/submission",{onError:r=>{console.log("error nih bos : "+r)}})};return(r,a)=>(p(),_(H,null,[i("div",De,[Re,i("form",{onSubmit:L(x,["prevent"]),class:"grid w-full items-start gap-6 overflow-auto p-2 lg:p-4"},[i("div",Oe,[l(e(u),{for:"competition"},{default:t(()=>[n("Competition : ")]),_:1}),l(e(j),null,{default:t(()=>[n(y(e(se)(e(s).competition)),1)]),_:1}),l(m,{class:"mt-2",message:e(s).errors.competition},null,8,["message"])]),i("div",Ce,[l(e(u),null,{default:t(()=>[n("Upload File")]),_:1}),l(e(c),{name:"test",ref:"pond","label-idle":"Drop files here...","instant-upload":!1,"allow-multiple":!0,credits:"false","accepted-file-types":"image/jpeg, image/png, image/jpg","max-file-size":"3MB","max-files":2,disabled:e(s).processing,onWarning:a[0]||(a[0]=o=>e(s).errors.files="Max file 2"),onUpdatefiles:a[1]||(a[1]=o=>e(s).errors.files=void 0),onAddfile:h,onInit:v,onRemovefile:S},null,8,["disabled"]),l(m,{class:"mt-2",message:e(s).errors.files},null,8,["message"])]),i("div",Te,[l(e(u),{for:"judul"},{default:t(()=>[n("Judul")]),_:1}),l(e($),{id:"judul",required:"",modelValue:e(s).judulSubmission,"onUpdate:modelValue":a[2]||(a[2]=o=>e(s).judulSubmission=o),placeholder:"ex: GDSCHOOLICIOUS_NAMA SEKOLAH_KOTA ASAL",disabled:e(s).processing},null,8,["modelValue","disabled"]),l(m,{class:"mt-2",message:e(s).errors.judulSubmission},null,8,["message"])]),i("div",Be,[i("div",null,[l(e(u),{for:"instagram_reels"},{default:t(()=>[n("link URL Instagram Reels :")]),_:1}),Le]),l(e($),{modelValue:e(s).linkIg,"onUpdate:modelValue":a[3]||(a[3]=o=>e(s).linkIg=o),required:"",id:"instagram_reels",placeholder:"ex: https://www.instagram.com/reel/C68td6fyyzsM/?hl=en",disabled:e(s).processing},null,8,["modelValue","disabled"]),l(m,{class:"mt-2",message:e(s).errors.linkIg},null,8,["message"])]),i("div",Me,[l(e(u),{for:"role"},{default:t(()=>[n("Upload Thumbnail")]),_:1}),l(e(c),{name:"test","max-file-size":"3MB","accepted-file-types":"image/jpeg, image/png, image/jpg","label-idle":"Drop files here...","instant-upload":!1,"allow-multiple":!1,credits:"false",required:"",disabled:e(s).processing,onAddfile:V,onInit:v,onWarning:a[4]||(a[4]=o=>console.log(o)),onRemovefile:A},null,8,["disabled"]),l(m,{class:"mt-2",message:e(s).errors.thumbnail},null,8,["message"])]),i("div",qe,[l(e(u),{for:"description"},{default:t(()=>[n("Description")]),_:1}),l(e(E),{id:"description",required:"",modelValue:e(s).submissionDescription,"onUpdate:modelValue":a[5]||(a[5]=o=>e(s).submissionDescription=o),placeholder:"ex: Temukan Harmoni indah dalam lagu 'Rasa di Ujung Senda' dengan lirik penuh makna dan melodi yang menenagkan",class:"min-h-[9.5rem]",disabled:e(s).processing},null,8,["modelValue","disabled"]),l(m,{class:"mt-2",message:e(s).errors.submissionDescription},null,8,["message"])]),e(s).progress?(p(),_("div",Ne,[i("div",He,[i("div",{class:"h-full bg-primary transition-all duration-200",style:M({width:e(s).progress.percentage+"%"})},null,4)]),i("div",Ee,[Ke,i("div",We,y(e(s).progress.percentage)+"%",1)])])):q("",!0),l(ee,{class:N([{"opacity-25":e(s).processing},"ml-auto w-fit"]),disabled:e(s).processing,type:"submit"},{default:t(()=>[n("Submit")]),_:1},8,["class","disabled"])],32)]),l(e(Y),null,{default:t(()=>[l(e(K),null,{default:t(()=>[l(e(W),null,{default:t(()=>[l(e(G),null,{default:t(()=>[n("Are you absolutely sure?")]),_:1}),l(e(J),null,{default:t(()=>[n(" This action cannot be undone. This will permanently send the submission ")]),_:1})]),_:1}),l(e(Q),null,{default:t(()=>[l(e(Z),null,{default:t(()=>[n("Cancel")]),_:1}),l(e(X),null,{default:t(()=>[n("Continue")]),_:1})]),_:1})]),_:1})]),_:1})],64))}}),ds=z({__name:"Upload",setup(k){return(g,b)=>(p(),U(te,null,{default:t(()=>[l(e(ue),{title:"Submission page"}),l(be),g.$page.props.auth.user.competition==="mascot-design"?(p(),U(Ge,{key:0})):(p(),U(Pe,{key:1}))]),_:1}))}});export{ds as default};
