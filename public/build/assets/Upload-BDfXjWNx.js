import{d as $,o as b,c as k,r as Te,n as it,u as g,j as Pe,h as Oe,w as x,q as D,s as J,a as u,f as y,H as Ie,I as Ae,Q as at,J as ot,F as me,e as ve,b as j,g as B,K as ut,t as se,i as Be,L as lt,T as ct,Z as dt,k as _e,C as be}from"./app-BFyfJvbD.js";import{d as ht,t as ft,c as pt}from"./index-CBrG02ZY.js";import{c as Le}from"./utils-z192C6H7.js";import{_ as ye}from"./Input.vue_vue_type_script_setup_true_lang-iqg7onkm.js";import{_ as gt}from"./Textarea.vue_vue_type_script_setup_true_lang-Bw-AbYcK.js";import{_ as mt}from"./AppLayout.vue_vue_type_script_setup_true_lang-_DrbeFzA.js";import{u as je,C as Ue,_ as vt}from"./ScrollArea.vue_vue_type_script_setup_true_lang-Kkhc0SZB.js";import{_ as Fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as _t}from"./createLucideIcon-DZdGrK3Z.js";import"./ApplicationLogo-N9s0TnlS.js";/**
 * @license lucide-vue-next v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=_t("VideoOffIcon",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),yt=$({__name:"Badge",props:{variant:{},class:{}},setup(e){const t=e;return(n,r)=>(b(),k("div",{class:it(g(Le)(g(kt)({variant:n.variant}),t.class))},[Te(n.$slots,"default")],2))}}),kt=ht("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),F=$({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,n=Pe(()=>{const{class:r,...s}=t;return s});return(r,s)=>(b(),Oe(g(ft),D(n.value,{class:g(Le)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t.class)}),{default:x(()=>[Te(r.$slots,"default")]),_:3},16,["class"]))}}),ce=e=>(Ie("data-v-e0f72d41"),e=e(),Ae(),e),Ct={class:"text-center"},St={class:"mx-auto max-w-min rounded-md border p-2"},wt=ce(()=>u("p",{class:"mt-2 text-sm text-gray-600"},"Masih WIP, ALIAS BELUM WORK 100%",-1)),Et={key:0},xt={key:1,class:"mt-2 text-sm text-gray-600"},Rt=ce(()=>u("span",{class:"font-semibold"},"Drag files",-1)),zt=[Rt],Tt=ce(()=>u("p",{class:"text-xs text-gray-500"}," Click to upload files (files should be under 250MB) ",-1)),Pt=$({__name:"FileUpload",emits:["uploadedFilesChange"],setup(e,{emit:t}){const n=J(null),r=t,s=async(d,f)=>{n.value=d,r("uploadedFilesChange",n)},{getRootProps:o,getInputProps:i,isDragActive:l}=je({onDrop:s,maxFiles:1,multiple:!1,accept:"video/*",maxSize:250*1024*1024});return(d,f)=>(b(),k("div",null,[u("label",D(g(o)(),{class:"relative flex w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 py-6 hover:bg-gray-100"}),[u("div",Ct,[u("div",St,[y(g(Ue),{size:20})]),wt,g(l)?(b(),k("p",Et,"Drop the files here ...")):(b(),k("p",xt,zt)),Tt])],16),u("input",D(g(i)(),{id:"dropzone-file",accept:"video/*",type:"file",class:"hidden"}),null,16)]))}}),Ot=Fe(Pt,[["__scopeId","data-v-e0f72d41"]]);var It=Object.create,De=Object.defineProperty,At=Object.getOwnPropertyDescriptor,Me=Object.getOwnPropertyNames,Bt=Object.getPrototypeOf,Lt=Object.prototype.hasOwnProperty,H=(e,t)=>function(){return t||(0,e[Me(e)[0]])((t={exports:{}}).exports,t),t.exports},jt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Me(t))!Lt.call(e,s)&&s!==n&&De(e,s,{get:()=>t[s],enumerable:!(r=At(t,s))||r.enumerable});return e},Ut=(e,t,n)=>(n=e!=null?It(Bt(e)):{},jt(!e||!e.__esModule?De(n,"default",{value:e,enumerable:!0}):n,e)),Ft=H({"node_modules/global/window.js"(e,t){var n;typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"?n=self:n={},t.exports=n}}),Dt=H({"node_modules/is-function/index.js"(e,t){t.exports=r;var n=Object.prototype.toString;function r(s){if(!s)return!1;var o=n.call(s);return o==="[object Function]"||typeof s=="function"&&o!=="[object RegExp]"||typeof window<"u"&&(s===window.setTimeout||s===window.alert||s===window.confirm||s===window.prompt)}}}),Mt=H({"node_modules/parse-headers/parse-headers.js"(e,t){var n=function(s){return s.replace(/^\s+|\s+$/g,"")},r=function(s){return Object.prototype.toString.call(s)==="[object Array]"};t.exports=function(s){if(!s)return{};for(var o={},i=n(s).split(`
`),l=0;l<i.length;l++){var d=i[l],f=d.indexOf(":"),m=n(d.slice(0,f)).toLowerCase(),C=n(d.slice(f+1));typeof o[m]>"u"?o[m]=C:r(o[m])?o[m].push(C):o[m]=[o[m],C]}return o}}}),Nt=H({"node_modules/xtend/immutable.js"(e,t){t.exports=r;var n=Object.prototype.hasOwnProperty;function r(){for(var s={},o=0;o<arguments.length;o++){var i=arguments[o];for(var l in i)n.call(i,l)&&(s[l]=i[l])}return s}}}),$t=H({"node_modules/xhr/index.js"(e,t){var n=Ft(),r=Dt(),s=Mt(),o=Nt();t.exports=f,t.exports.default=f,f.XMLHttpRequest=n.XMLHttpRequest||O,f.XDomainRequest="withCredentials"in new f.XMLHttpRequest?f.XMLHttpRequest:n.XDomainRequest,i(["get","put","post","patch","head","delete"],function(a){f[a==="delete"?"del":a]=function(h,p,S){return p=d(h,p,S),p.method=a.toUpperCase(),m(p)}});function i(a,h){for(var p=0;p<a.length;p++)h(a[p])}function l(a){for(var h in a)if(a.hasOwnProperty(h))return!1;return!0}function d(a,h,p){var S=a;return r(h)?(p=h,typeof a=="string"&&(S={uri:a})):S=o(h,{uri:a}),S.callback=p,S}function f(a,h,p){return h=d(a,h,p),m(h)}function m(a){if(typeof a.callback>"u")throw new Error("callback argument missing");var h=!1,p=function(A,K,st){h||(h=!0,a.callback(A,K,st))};function S(){c.readyState===4&&setTimeout(E,0)}function X(){var v=void 0;if(c.response?v=c.response:v=c.responseText||C(c),pe)try{v=JSON.parse(v)}catch{}return v}function I(v){return clearTimeout(re),v instanceof Error||(v=new Error(""+(v||"Unknown XMLHttpRequest Error"))),v.statusCode=0,p(v,ge)}function E(){if(!G){var v;clearTimeout(re),a.useXDR&&c.status===void 0?v=200:v=c.status===1223?204:c.status;var A=ge,K=null;return v!==0?(A={body:X(),statusCode:v,method:U,headers:{},url:ee,rawRequest:c},c.getAllResponseHeaders&&(A.headers=s(c.getAllResponseHeaders()))):K=new Error("Internal XMLHttpRequest Error"),p(K,A,A.body)}}var c=a.xhr||null;c||(a.cors||a.useXDR?c=new f.XDomainRequest:c=new f.XMLHttpRequest);var q,G,ee=c.url=a.uri||a.url,U=c.method=a.method||"GET",te=a.body||a.data,R=c.headers=a.headers||{},ne=!!a.sync,pe=!1,re,ge={body:void 0,headers:{},statusCode:0,method:U,url:ee,rawRequest:c};if("json"in a&&a.json!==!1&&(pe=!0,R.accept||R.Accept||(R.Accept="application/json"),U!=="GET"&&U!=="HEAD"&&(R["content-type"]||R["Content-Type"]||(R["Content-Type"]="application/json"),te=JSON.stringify(a.json===!0?te:a.json))),c.onreadystatechange=S,c.onload=E,c.onerror=I,c.onprogress=function(){},c.onabort=function(){G=!0},c.ontimeout=I,c.open(U,ee,!ne,a.username,a.password),ne||(c.withCredentials=!!a.withCredentials),!ne&&a.timeout>0&&(re=setTimeout(function(){if(!G){G=!0,c.abort("timeout");var v=new Error("XMLHttpRequest timeout");v.code="ETIMEDOUT",I(v)}},a.timeout)),c.setRequestHeader)for(q in R)R.hasOwnProperty(q)&&c.setRequestHeader(q,R[q]);else if(a.headers&&!l(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(c.responseType=a.responseType),"beforeSend"in a&&typeof a.beforeSend=="function"&&a.beforeSend(c),c.send(te||null),c}function C(a){try{if(a.responseType==="document")return a.responseXML;var h=a.responseXML&&a.responseXML.documentElement.nodeName==="parsererror";if(a.responseType===""&&!h)return a.responseXML}catch{}return null}function O(){}}});function de(e,t,...n){if(!e)throw new TypeError(Ne(t,n))}function Ne(e,t){let n=0;return e.replace(/%[os]/gu,()=>$e(t[n++]))}function $e(e){return typeof e!="object"||e===null?String(e):Object.prototype.toString.call(e)}var Ht;function Wt(e){try{const t=e instanceof Error?e:new Error($e(e));if(typeof dispatchEvent=="function"&&typeof ErrorEvent=="function")dispatchEvent(new ErrorEvent("error",{error:t,message:t.message}));else if(typeof process<"u"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)}catch{}}var w=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:typeof globalThis<"u"?globalThis:void 0,Vt,P=class{constructor(e,t){this.code=e,this.message=t}warn(...e){var t;try{const n=((t=new Error().stack)!==null&&t!==void 0?t:"").replace(/^(?:.+?\n){2}/gu,`
`);console.warn(this.message,...e,n)}catch{}}},Xt=new P("W01","Unable to initialize event under dispatching."),qt=new P("W02","Assigning any falsy value to 'cancelBubble' property has no effect."),Gt=new P("W03","Assigning any truthy value to 'returnValue' property has no effect."),Kt=new P("W04","Unable to preventDefault on non-cancelable events."),Jt=new P("W05","Unable to preventDefault inside passive event listener invocation."),Yt=new P("W06","An event listener wasn't added because it has been added already: %o, %o"),ie=new P("W07","The %o option value was abandoned because the event listener wasn't added as duplicated."),ke=new P("W08","The 'callback' argument must be a function or an object that has 'handleEvent' method: %o"),z=class{static get NONE(){return Ce}static get CAPTURING_PHASE(){return Se}static get AT_TARGET(){return we}static get BUBBLING_PHASE(){return Ee}constructor(e,t){Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const n=t??{};le.set(this,{type:String(e),bubbles:!!n.bubbles,cancelable:!!n.cancelable,composed:!!n.composed,target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1,inPassiveListenerFlag:!1,dispatchFlag:!1,timeStamp:Date.now()})}get type(){return _(this).type}get target(){return _(this).target}get srcElement(){return _(this).target}get currentTarget(){return _(this).currentTarget}composedPath(){const e=_(this).currentTarget;return e?[e]:[]}get NONE(){return Ce}get CAPTURING_PHASE(){return Se}get AT_TARGET(){return we}get BUBBLING_PHASE(){return Ee}get eventPhase(){return _(this).dispatchFlag?2:0}stopPropagation(){_(this).stopPropagationFlag=!0}get cancelBubble(){return _(this).stopPropagationFlag}set cancelBubble(e){e?_(this).stopPropagationFlag=!0:qt.warn()}stopImmediatePropagation(){const e=_(this);e.stopPropagationFlag=e.stopImmediatePropagationFlag=!0}get bubbles(){return _(this).bubbles}get cancelable(){return _(this).cancelable}get returnValue(){return!_(this).canceledFlag}set returnValue(e){e?Gt.warn():xe(_(this))}preventDefault(){xe(_(this))}get defaultPrevented(){return _(this).canceledFlag}get composed(){return _(this).composed}get isTrusted(){return!1}get timeStamp(){return _(this).timeStamp}initEvent(e,t=!1,n=!1){const r=_(this);if(r.dispatchFlag){Xt.warn();return}le.set(this,{...r,type:String(e),bubbles:!!t,cancelable:!!n,target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1})}},Ce=0,Se=1,we=2,Ee=3,le=new WeakMap;function _(e,t="this"){const n=le.get(e);return de(n!=null,"'%s' must be an object that Event constructor created, but got another one: %o",t,e),n}function xe(e){if(e.inPassiveListenerFlag){Jt.warn();return}if(!e.cancelable){Kt.warn();return}e.canceledFlag=!0}Object.defineProperty(z,"NONE",{enumerable:!0});Object.defineProperty(z,"CAPTURING_PHASE",{enumerable:!0});Object.defineProperty(z,"AT_TARGET",{enumerable:!0});Object.defineProperty(z,"BUBBLING_PHASE",{enumerable:!0});var ae=Object.getOwnPropertyNames(z.prototype);for(let e=0;e<ae.length;++e)ae[e]!=="constructor"&&Object.defineProperty(z.prototype,ae[e],{enumerable:!0});typeof w<"u"&&typeof w.Event<"u"&&Object.setPrototypeOf(z.prototype,w.Event.prototype);function Zt(e){return w.DOMException?new w.DOMException(e,"InvalidStateError"):(L==null&&(L=class He extends Error{constructor(n){super(n),Error.captureStackTrace&&Error.captureStackTrace(this,He)}get code(){return 11}get name(){return"InvalidStateError"}},Object.defineProperties(L.prototype,{code:{enumerable:!0},name:{enumerable:!0}}),ze(L),ze(L.prototype)),new L(e))}var L,Re={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function ze(e){const t=Object.keys(Re);for(let n=0;n<t.length;++n){const r=t[n],s=Re[r];Object.defineProperty(e,r,{get(){return s},configurable:!0,enumerable:!0})}}var Z=class extends z{static wrap(e){return new(Ve(e))(e)}constructor(e){super(e.type,{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}),e.cancelBubble&&super.stopPropagation(),e.defaultPrevented&&super.preventDefault(),We.set(this,{original:e});const t=Object.keys(e);for(let n=0;n<t.length;++n){const r=t[n];r in this||Object.defineProperty(this,r,Xe(e,r))}}stopPropagation(){super.stopPropagation();const{original:e}=T(this);"stopPropagation"in e&&e.stopPropagation()}get cancelBubble(){return super.cancelBubble}set cancelBubble(e){super.cancelBubble=e;const{original:t}=T(this);"cancelBubble"in t&&(t.cancelBubble=e)}stopImmediatePropagation(){super.stopImmediatePropagation();const{original:e}=T(this);"stopImmediatePropagation"in e&&e.stopImmediatePropagation()}get returnValue(){return super.returnValue}set returnValue(e){super.returnValue=e;const{original:t}=T(this);"returnValue"in t&&(t.returnValue=e)}preventDefault(){super.preventDefault();const{original:e}=T(this);"preventDefault"in e&&e.preventDefault()}get timeStamp(){const{original:e}=T(this);return"timeStamp"in e?e.timeStamp:super.timeStamp}},We=new WeakMap;function T(e){const t=We.get(e);return de(t!=null,"'this' is expected an Event object, but got",e),t}var Y=new WeakMap;Y.set(Object.prototype,Z);typeof w<"u"&&typeof w.Event<"u"&&Y.set(w.Event.prototype,Z);function Ve(e){const t=Object.getPrototypeOf(e);if(t==null)return Z;let n=Y.get(t);return n==null&&(n=Qt(Ve(t),t),Y.set(t,n)),n}function Qt(e,t){class n extends e{}const r=Object.keys(t);for(let s=0;s<r.length;++s)Object.defineProperty(n.prototype,r[s],Xe(t,r[s]));return n}function Xe(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return{get(){const r=T(this).original,s=r[t];return typeof s=="function"?s.bind(r):s},set(r){const s=T(this).original;s[t]=r},configurable:n.configurable,enumerable:n.enumerable}}function en(e,t,n,r,s,o){return{callback:e,flags:(t?1:0)|(n?2:0)|(r?4:0),signal:s,signalListener:o}}function tn(e){e.flags|=8}function qe(e){return(e.flags&1)===1}function Ge(e){return(e.flags&2)===2}function Ke(e){return(e.flags&4)===4}function nn(e){return(e.flags&8)===8}function rn({callback:e},t,n){try{typeof e=="function"?e.call(t,n):typeof e.handleEvent=="function"&&e.handleEvent(n)}catch(r){Wt(r)}}function Je({listeners:e},t,n){for(let r=0;r<e.length;++r)if(e[r].callback===t&&qe(e[r])===n)return r;return-1}function sn(e,t,n,r,s,o){let i;o&&(i=Ye.bind(null,e,t,n),o.addEventListener("abort",i));const l=en(t,n,r,s,o,i);return e.cow?(e.cow=!1,e.listeners=[...e.listeners,l]):e.listeners.push(l),l}function Ye(e,t,n){const r=Je(e,t,n);return r!==-1?Ze(e,r):!1}function Ze(e,t,n=!1){const r=e.listeners[t];return tn(r),r.signal&&r.signal.removeEventListener("abort",r.signalListener),e.cow&&!n?(e.cow=!1,e.listeners=e.listeners.filter((s,o)=>o!==t),!1):(e.listeners.splice(t,1),!0)}function an(){return Object.create(null)}function on(e,t){var n;return(n=e[t])!==null&&n!==void 0?n:e[t]={attrCallback:void 0,attrListener:void 0,cow:!1,listeners:[]}}var Q=class{constructor(){Qe.set(this,an())}addEventListener(e,t,n){const r=oe(this),{callback:s,capture:o,once:i,passive:l,signal:d,type:f}=un(e,t,n);if(s==null||d!=null&&d.aborted)return;const m=on(r,f),C=Je(m,s,o);if(C!==-1){cn(m.listeners[C],l,i,d);return}sn(m,s,o,l,i,d)}removeEventListener(e,t,n){const r=oe(this),{callback:s,capture:o,type:i}=ln(e,t,n),l=r[i];s!=null&&l&&Ye(l,s,o)}dispatchEvent(e){const t=oe(this)[String(e.type)];if(t==null)return!0;const n=e instanceof z?e:Z.wrap(e),r=_(n,"event");if(r.dispatchFlag)throw Zt("This event has been in dispatching.");if(r.dispatchFlag=!0,r.target=r.currentTarget=this,!r.stopPropagationFlag){const{cow:s,listeners:o}=t;t.cow=!0;for(let i=0;i<o.length;++i){const l=o[i];if(!nn(l)&&(Ke(l)&&Ze(t,i,!s)&&(i-=1),r.inPassiveListenerFlag=Ge(l),rn(l,this,n),r.inPassiveListenerFlag=!1,r.stopImmediatePropagationFlag))break}s||(t.cow=!1)}return r.target=null,r.currentTarget=null,r.stopImmediatePropagationFlag=!1,r.stopPropagationFlag=!1,r.dispatchFlag=!1,!r.canceledFlag}},Qe=new WeakMap;function oe(e,t="this"){const n=Qe.get(e);return de(n!=null,"'%s' must be an object that EventTarget constructor created, but got another one: %o",t,e),n}function un(e,t,n){var r;return et(t),typeof n=="object"&&n!==null?{type:String(e),callback:t??void 0,capture:!!n.capture,passive:!!n.passive,once:!!n.once,signal:(r=n.signal)!==null&&r!==void 0?r:void 0}:{type:String(e),callback:t??void 0,capture:!!n,passive:!1,once:!1,signal:void 0}}function ln(e,t,n){return et(t),typeof n=="object"&&n!==null?{type:String(e),callback:t??void 0,capture:!!n.capture}:{type:String(e),callback:t??void 0,capture:!!n}}function et(e){if(!(typeof e=="function"||typeof e=="object"&&e!==null&&typeof e.handleEvent=="function")){if(e==null||typeof e=="object"){ke.warn(e);return}throw new TypeError(Ne(ke.message,[e]))}}function cn(e,t,n,r){Yt.warn(qe(e)?"capture":"bubble",e.callback),Ge(e)!==t&&ie.warn("passive"),Ke(e)!==n&&ie.warn("once"),e.signal!==r&&ie.warn("signal")}var ue=Object.getOwnPropertyNames(Q.prototype);for(let e=0;e<ue.length;++e)ue[e]!=="constructor"&&Object.defineProperty(Q.prototype,ue[e],{enumerable:!0});typeof w<"u"&&typeof w.EventTarget<"u"&&Object.setPrototypeOf(Q.prototype,w.EventTarget.prototype);var dn=Ut($t()),he=30720,W=512e3,V=256,M=(e,{minChunkSize:t=V,maxChunkSize:n=W}={})=>e==null||typeof e=="number"&&e>=256&&e%256===0&&e>=t&&e<=n,N=(e,{minChunkSize:t=V,maxChunkSize:n=W}={})=>new TypeError(`chunkSize ${e} must be a positive number in multiples of 256, between ${t} and ${n}`),hn=class{constructor(e,t={}){this.readableStream=e;var n,r,s;if(!M(t.defaultChunkSize,t))throw N(t.defaultChunkSize,t);this.defaultChunkSize=(n=t.defaultChunkSize)!=null?n:he,this.minChunkSize=(r=t.minChunkSize)!=null?r:V,this.maxChunkSize=(s=t.maxChunkSize)!=null?s:W}get chunkSize(){var e;return(e=this._chunkSize)!=null?e:this.defaultChunkSize}set chunkSize(e){if(!M(e,this))throw N(e,this);this._chunkSize=e}get chunkByteSize(){return this.chunkSize*1024}get error(){return this._error}async*[Symbol.asyncIterator](){let e;const t=this.readableStream.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n){if(e){const o=e;e=void 0,yield o}break}const s=r instanceof Uint8Array?new Blob([r],{type:"application/octet-stream"}):r;for(e=e?new Blob([e,s]):s;e;)if(e.size===this.chunkByteSize){const o=e;e=void 0,yield o;break}else{if(e.size<this.chunkByteSize)break;{const o=e.slice(0,this.chunkByteSize);e=e.slice(this.chunkByteSize),yield o}}}}catch(n){this._error=n}finally{if(e){const n=e;e=void 0,yield n}t.releaseLock();return}}},fn=class{constructor(e,t={}){this.file=e;var n,r,s;if(!M(t.defaultChunkSize,t))throw N(t.defaultChunkSize,t);this.defaultChunkSize=(n=t.defaultChunkSize)!=null?n:he,this.minChunkSize=(r=t.minChunkSize)!=null?r:V,this.maxChunkSize=(s=t.maxChunkSize)!=null?s:W}get chunkSize(){var e;return(e=this._chunkSize)!=null?e:this.defaultChunkSize}set chunkSize(e){if(!M(e,this))throw N(e,this);this._chunkSize=e}get chunkByteSize(){return this.chunkSize*1024}get error(){return this._error}async*[Symbol.asyncIterator](){const e=new FileReader;let t=0;const n=()=>new Promise(r=>{if(t>=this.file.size){r(void 0);return}const s=Math.min(this.chunkByteSize,this.file.size-t);e.onload=()=>{e.result!==null?r(new Blob([e.result],{type:"application/octet-stream"})):r(void 0)},e.readAsArrayBuffer(this.file.slice(t,t+s))});try{for(;;){const r=await n();if(r)t+=r.size,yield r;else break}}catch(r){this._error=r}}},pn=[200,201,202,204,308],tt=[408,502,503,504],gn=[308],nt=(e,t)=>!!e&&pn.includes(e.statusCode),mn=(e,{retryCodes:t=tt})=>!e||t.includes(e.statusCode),vn=(e,t)=>t.attemptCount>=t.attempts||!(nt(e)||mn(e,t)),_n=(e,t)=>{var n;if(!e||!gn.includes(e.statusCode)||!((n=e.headers)!=null&&n.range))return!1;const r=e.headers.range.match(/bytes=(\d+)-(\d+)/);return r?parseInt(r[2],10)!==t.currentChunkEndByte:!1},rt=class{static createUpload(e){return new rt(e)}constructor(e){if(this.eventTarget=new Q,this.endpoint=e.endpoint,this.file=e.file,this.headers=e.headers||{},this.method=e.method||"PUT",this.attempts=e.attempts||5,this.delayBeforeAttempt=e.delayBeforeAttempt||1,this.retryCodes=e.retryCodes||tt,this.dynamicChunkSize=e.dynamicChunkSize||!1,this.maxFileBytes=(e.maxFileSize||0)*1024,this.chunkCount=0,this.attemptCount=0,this._offline=typeof window<"u"&&!window.navigator.onLine,this._paused=!1,this.success=!1,this.nextChunkRangeStart=0,e.useLargeFileWorkaround){const t=n=>{this.chunkedIterable.error&&(console.warn(`Unable to read file of size ${this.file.size} bytes via a ReadableStream. Falling back to in-memory FileReader!`),n.stopImmediatePropagation(),this.chunkedIterable=new fn(this.file,{...e,defaultChunkSize:e.chunkSize}),this.chunkedIterator=this.chunkedIterable[Symbol.asyncIterator](),this.getEndpoint().then(()=>{this.sendChunks()}),this.off("error",t))};this.on("error",t)}this.chunkedIterable=new hn(this.file.stream(),{...e,defaultChunkSize:e.chunkSize}),this.chunkedIterator=this.chunkedIterable[Symbol.asyncIterator](),this.totalChunks=Math.ceil(this.file.size/this.chunkByteSize),this.validateOptions(),this.getEndpoint().then(()=>this.sendChunks()),typeof window<"u"&&(window.addEventListener("online",()=>{this.offline&&(this._offline=!1,this.dispatch("online"),this.sendChunks())}),window.addEventListener("offline",()=>{this.offline||(this._offline=!0,this.dispatch("offline"))}))}get maxChunkSize(){var e,t;return(t=(e=this.chunkedIterable)==null?void 0:e.maxChunkSize)!=null?t:W}get minChunkSize(){var e,t;return(t=(e=this.chunkedIterable)==null?void 0:e.minChunkSize)!=null?t:V}get chunkSize(){var e,t;return(t=(e=this.chunkedIterable)==null?void 0:e.chunkSize)!=null?t:he}set chunkSize(e){this.chunkedIterable.chunkSize=e}get chunkByteSize(){return this.chunkedIterable.chunkByteSize}get totalChunkSize(){return Math.ceil(this.file.size/this.chunkByteSize)}on(e,t){this.eventTarget.addEventListener(e,t)}once(e,t){this.eventTarget.addEventListener(e,t,{once:!0})}off(e,t){this.eventTarget.removeEventListener(e,t)}get offline(){return this._offline}get paused(){return this._paused}abort(){var e;this.pause(),(e=this.currentXhr)==null||e.abort()}pause(){this._paused=!0}resume(){this._paused&&(this._paused=!1,this.sendChunks())}get successfulPercentage(){return this.nextChunkRangeStart/this.file.size}dispatch(e,t){const n=new CustomEvent(e,{detail:t});this.eventTarget.dispatchEvent(n)}validateOptions(){if(!this.endpoint||typeof this.endpoint!="function"&&typeof this.endpoint!="string")throw new TypeError("endpoint must be defined as a string or a function that returns a promise");if(!(this.file instanceof File))throw new TypeError("file must be a File object");if(this.headers&&typeof this.headers!="function"&&typeof this.headers!="object")throw new TypeError("headers must be null, an object, or a function that returns an object or a promise");if(!M(this.chunkSize,{maxChunkSize:this.maxChunkSize,minChunkSize:this.minChunkSize}))throw N(this.chunkSize,{maxChunkSize:this.maxChunkSize,minChunkSize:this.minChunkSize});if(this.maxChunkSize&&(typeof this.maxChunkSize!="number"||this.maxChunkSize<256||this.maxChunkSize%256!==0||this.maxChunkSize<this.chunkSize||this.maxChunkSize<this.minChunkSize))throw new TypeError(`maxChunkSize must be a positive number in multiples of 256, and larger than or equal to both ${this.minChunkSize} and ${this.chunkSize}`);if(this.minChunkSize&&(typeof this.minChunkSize!="number"||this.minChunkSize<256||this.minChunkSize%256!==0||this.minChunkSize>this.chunkSize||this.minChunkSize>this.maxChunkSize))throw new TypeError(`minChunkSize must be a positive number in multiples of 256, and smaller than ${this.chunkSize} and ${this.maxChunkSize}`);if(this.maxFileBytes>0&&this.maxFileBytes<this.file.size)throw new Error(`file size exceeds maximum (${this.file.size} > ${this.maxFileBytes})`);if(this.attempts&&(typeof this.attempts!="number"||this.attempts<=0))throw new TypeError("retries must be a positive number");if(this.delayBeforeAttempt&&(typeof this.delayBeforeAttempt!="number"||this.delayBeforeAttempt<0))throw new TypeError("delayBeforeAttempt must be a positive number")}getEndpoint(){return typeof this.endpoint=="string"?(this.endpointValue=this.endpoint,Promise.resolve(this.endpoint)):this.endpoint(this.file).then(e=>(this.endpointValue=e,this.endpointValue))}xhrPromise(e){const t=n=>{n.upload.onprogress=r=>{var s;const o=this.totalChunks-this.chunkCount,i=(this.file.size-this.nextChunkRangeStart)/this.file.size/o,d=r.loaded/((s=r.total)!=null?s:this.chunkByteSize)*i;this.dispatch("progress",Math.min((this.successfulPercentage+d)*100,100))}};return new Promise((n,r)=>{this.currentXhr=(0,dn.default)({...e,beforeSend:t},(s,o)=>(this.currentXhr=void 0,s?r(s):n(o)))})}async sendChunk(e){const t=this.nextChunkRangeStart,n=t+e.size-1,s={...await(typeof this.headers=="function"?this.headers():this.headers),"Content-Type":this.file.type,"Content-Range":`bytes ${t}-${n}/${this.file.size}`};return this.dispatch("attempt",{chunkNumber:this.chunkCount,totalChunks:this.totalChunks,chunkSize:this.chunkSize}),this.xhrPromise({headers:s,url:this.endpointValue,method:this.method,body:e})}async sendChunkWithRetries(e){const t=async(i,l)=>{var d;const m=(new Date().getTime()-this.lastChunkStart.getTime())/1e3;if(this.dispatch("chunkSuccess",{chunk:this.chunkCount,chunkSize:this.chunkSize,attempts:this.attemptCount,timeInterval:m,response:i}),this.attemptCount=0,this.chunkCount=((d=this.chunkCount)!=null?d:0)+1,this.nextChunkRangeStart=this.nextChunkRangeStart+this.chunkByteSize,this.dynamicChunkSize){let C=this.chunkSize;m<10?C=Math.min(this.chunkSize*2,this.maxChunkSize):m>30&&(C=Math.max(this.chunkSize/2,this.minChunkSize)),this.chunkSize=Math.ceil(C/256)*256;const O=(this.file.size-this.nextChunkRangeStart)/this.chunkByteSize;this.totalChunks=Math.ceil(this.chunkCount+O)}return!0},n=async(i,l)=>(this.dispatch("progress",Math.min(this.successfulPercentage*100,100)),this.dispatch("error",{message:`Server responded with ${i.statusCode}. Stopping upload.`,chunk:this.chunkCount,attempts:this.attemptCount,response:i}),!1),r=async(i,l)=>(this.dispatch("attemptFailure",{message:`An error occured uploading chunk ${this.chunkCount}. ${this.attempts-this.attemptCount} retries left.`,chunkNumber:this.chunkCount,attemptsLeft:this.attempts-this.attemptCount,response:i}),new Promise(d=>{setTimeout(async()=>{if(this._paused||this.offline){this.pendingChunk=e,d(!1);return}const f=await this.sendChunkWithRetries(e);d(f)},this.delayBeforeAttempt*1e3)}));let s;try{this.attemptCount=this.attemptCount+1,this.lastChunkStart=new Date,s=await this.sendChunk(e)}catch(i){typeof(i==null?void 0:i.statusCode)=="number"&&(s=i)}const o={retryCodes:this.retryCodes,attemptCount:this.attemptCount,attempts:this.attempts,currentChunkEndByte:this.nextChunkRangeStart+e.size-1};return _n(s,o)?r(s):nt(s)?t(s):vn(s,o)?n(s):r(s)}async sendChunks(){if(this.pendingChunk&&!(this._paused||this.offline)){const e=this.pendingChunk;this.pendingChunk=void 0;const t=await this.sendChunkWithRetries(e);this.success&&t&&this.dispatch("success")}for(;!(this.success||this._paused||this.offline);){const{value:e,done:t}=await this.chunkedIterator.next();let n=!e&&t;if(e&&(n=await this.sendChunkWithRetries(e)),this.chunkedIterable.error){n=!1,this.dispatch("error",{message:`Unable to read file of size ${this.file.size} bytes. Try loading from another browser.`});return}if(this.success=!!t,this.success&&n&&this.dispatch("success"),!n)return}}};function bn(e){return rt.createUpload(e)}const fe=e=>(Ie("data-v-5c4c2ebf"),e=e(),Ae(),e),yn={class:"text-center"},kn={class:"mx-auto max-w-min rounded-md border p-2"},Cn=fe(()=>u("p",{class:"mt-2 text-sm text-gray-600"}," Masih WIP, ALIAS BELUM WORK 100% ",-1)),Sn={key:0},wn={key:1,class:"mt-2 text-sm text-gray-600"},En=fe(()=>u("span",{class:"font-semibold"},"Drag files",-1)),xn=[En],Rn=fe(()=>u("p",{class:"text-xs text-gray-500"}," Click to upload files (files should be under 250MB) ",-1)),zn={key:0,class:"text-sm"},Tn={key:1,class:"space-y-2"},Pn={class:"h-3 overflow-hidden rounded bg-gray-100 shadow-inner"},On={class:"flex items-center justify-between"},In={class:"flex items-center space-x-2"},An={class:"text-sm"},Bn={key:0,class:"text-sm"},Ln=$({__name:"VideoUploadChunk",props:{file:{default:null}},emits:["uploadedFilesChange"],setup(e,{emit:t}){const n=e,r=at(),s=J(null),o={file:n.file,uploader:null,progress:0,uploading:!1,error:null},i=ot({...o,formattedProgress:Pe(()=>Math.round(i.progress)),reset:()=>{Object.assign(i,o)}}),l=()=>{var h;(h=i.uploader)==null||h.abort(),i.reset&&i.reset()},d=()=>{i.file&&(i.file=i.file),i.file&&(i.uploader=bn({endpoint:route("test-upload.advance"),headers:{"X-CSRF-TOKEN":r.props.csrf_token},method:"POST",file:i.file,chunkSize:10*1024}),i.uploader.on("attempt",()=>{i.error=null,i.uploading=!0}),i.uploader.on("progress",h=>{i.progress=h.detail}),i.uploader.on("success",()=>{i.reset&&(i.reset(),lt.reload({only:["files"]}))}),i.uploader.on("error",h=>{i.error=h.detail.message}))},f=t,m=async(h,p)=>{if(i.file=h[0],p.length){s.value=p;return}s.value=null,i.file&&f("uploadedFilesChange",i.file)},{getRootProps:C,getInputProps:O,isDragActive:a}=je({onDrop:m,maxFiles:1,multiple:!1,accept:"video/mp4",maxSize:250*1024*1024});return(h,p)=>{var S,X;return b(),k("div",null,[u("form",{onSubmit:Be(d,["prevent"])},[u("label",D(g(C)(),{class:"relative flex w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 py-6 hover:bg-gray-100"}),[u("div",yn,[u("div",kn,[y(g(Ue),{size:20})]),Cn,g(a)?(b(),k("p",Sn,"Drop the files here ...")):(b(),k("p",wn,xn)),Rn])],16),s.value?(b(),k("div",zn,[(b(!0),k(me,null,ve(s.value,I=>(b(),k("ul",null,[(b(!0),k(me,null,ve(I.errors,E=>(b(),k("li",null,[u("p",null,se(E),1)]))),256))]))),256))])):j("",!0),y(pt,{class:"ml-auto"},{default:x(()=>[B("Upload")]),_:1}),i.uploading?(b(),k("div",Tn,[u("div",Pn,[u("div",{class:"h-full bg-blue-500 transition-all duration-200",style:ut({width:i.progress+"%"})},null,4)]),u("div",On,[u("div",In,[(S=i.uploader)!=null&&S.paused?j("",!0):(b(),k("button",{key:0,class:"text-sm text-indigo-500",onClick:p[0]||(p[0]=I=>{var E;return(E=i.uploader)==null?void 0:E.pause()})}," Pause ")),(X=i.uploader)!=null&&X.paused?(b(),k("button",{key:1,class:"text-sm text-indigo-500",onClick:p[1]||(p[1]=I=>{var E;return(E=i.uploader)==null?void 0:E.resume()})}," Resume ")):j("",!0),u("button",{class:"text-sm text-indigo-500",onClick:l}," Cancel ")]),u("div",An,se(i.formattedProgress)+"%",1)]),i.error?(b(),k("div",Bn,se(i.error),1)):j("",!0)])):j("",!0)],32),u("input",D(g(O)(),{id:"dropzone-file",accept:"video/*",type:"file",class:"hidden"}),null,16)])}}}),jn=Fe(Ln,[["__scopeId","data-v-5c4c2ebf"]]),Un={class:"grid w-full"},Fn={class:"flex flex-col"},Dn={class:"grid flex-1 gap-4 overflow-auto p-4 lg:grid-cols-3"},Mn={class:"relative flex-col items-start gap-8 md:flex"},Nn={class:"grid gap-6 rounded-lg border p-4"},$n=u("legend",{class:"-ml-1 px-1 text-sm font-medium"}," Submission info ",-1),Hn={class:"grid gap-3"},Wn={class:"grid gap-3"},Vn={class:"grid gap-3"},Xn={class:"grid gap-6 rounded-lg border p-4"},qn=u("legend",{class:"-ml-1 px-1 text-sm font-medium"}," Additional info ",-1),Gn={class:"grid gap-3"},Kn={class:"grid gap-3"},Jn=u("button",{type:"submit"},"Submit",-1),Yn={class:"relative flex w-full max-w-[100vw] flex-col items-center justify-center rounded-md bg-muted/50 p-2 ring-2 ring-primary lg:col-span-2 lg:p-4"},Zn={key:0,class:"grid aspect-video w-full items-center justify-center"},Qn={class:"text-center text-muted-foreground"},er=u("p",null,"No video",-1),dr=$({__name:"Upload",setup(e){const t=ct({}),n=J(null),r=J(null),s=()=>{let l=new FileReader;n.value&&r&&(l.readAsArrayBuffer(n.value),l.onload=function(d){var m;let f=(m=d.target)==null?void 0:m.result;if(f&&f instanceof ArrayBuffer){let C=new Blob([new Uint8Array(f)],{type:"video/mp4"}),O=window.URL.createObjectURL(C);r.value?r.value.src=O:console.error("videoPlayer is null when trying to set src")}else console.error("Unexpected buffer type:",f)})},o=l=>{n.value=l,s()};function i(){t.post("/test-upload/basic")}return(l,d)=>(b(),Oe(mt,null,{default:x(()=>[y(g(dt),{title:"Upload test page"}),u("div",Un,[u("div",Fn,[u("main",Dn,[y(g(vt),{class:"rounded-md border ring-2 max-lg:order-1 lg:h-[78vh]"},{default:x(()=>[u("div",Mn,[u("form",{onSubmit:Be(i,["prevent"]),class:"grid w-full items-start gap-6 overflow-auto p-2 lg:p-4"},[u("fieldset",Nn,[$n,u("div",Hn,[y(g(F),null,{default:x(()=>[B("Upload File")]),_:1}),y(jn,{onUploadedFilesChange:o},null,8,["onUploadedFilesChange"])]),u("div",Wn,[y(g(F),{for:"judul"},{default:x(()=>[B("Judul")]),_:1}),y(g(ye),{id:"judul",placeholder:"ex: GDSCHOOLICIOUS_NAMA SEKOLAH_KOTA ASAL"})]),u("div",Vn,[y(g(F),{for:"instagram_reels"},{default:x(()=>[B("link URL Instagram Reels :")]),_:1}),y(g(ye),{id:"instagram_reels",placeholder:"ex: https://www.instagram.com/reel/C68td6fyyzsM/?hl=en"})])]),u("fieldset",Xn,[qn,u("div",Gn,[y(g(F),{for:"role"},{default:x(()=>[B("Upload Thumbnail video")]),_:1}),y(Ot)]),u("div",Kn,[y(g(F),{for:"description"},{default:x(()=>[B("Description")]),_:1}),y(g(gt),{id:"description",placeholder:"ex: Temukan Harmoni indah dalam lagu 'Rasa di Ujung Senda' dengan lirik penuh makna dan melodi yang menenagkan",class:"min-h-[9.5rem]"})])]),Jn],32)])]),_:1}),u("div",Yn,[_e(y(g(yt),{variant:"outline",class:"absolute right-8 top-10 bg-muted opacity-50"},{default:x(()=>[B(" Video Preview ")]),_:1},512),[[be,n.value]]),_e(u("video",{draggable:"false",ref_key:"videoPlayer",ref:r,id:"video-preview",class:"aspect-video w-full rounded-lg",controls:""},null,512),[[be,n.value]]),n.value?j("",!0):(b(),k("div",Zn,[u("div",Qn,[y(g(bt),{class:"size-full"}),er])]))])])])])]),_:1}))}});export{dr as default};
